(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["main"],{"003b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create-order"},[r("ul",{staticClass:"selectcar-type"},e._l(e.activityList,function(t,a){return r("li",{key:a,class:{active:t.active},on:{click:function(a){return e.selectActivity(t.type,t.saleSn,t.saleName)}}},[e._v(e._s(t.saleName))])}),0),r("div",{staticClass:"create-order-inview first"},[r("h1",{on:{click:function(t){return e.selectType("shopInfo","shopList")}}},[e._v("\n      "+e._s(e.shopInfo.corpName||"--")+"\n      "),r("img",{attrs:{src:a("471a")}})]),r("h2",[e._v("地址："+e._s(e.shopInfo.bizProvinceName||"--")+e._s(e.shopInfo.bizCityName)+e._s(e.shopInfo.bizDistrictName)+e._s(e.shopInfo.bizRoadAddr))]),r("h2",[e._v("\n      联系电话：\n      "),r("a",{attrs:{href:"tel:"+e.shopInfo.telephone}},[e._v(e._s(e.shopInfo.telephone))])])]),r("div",{staticClass:"create-order-inview second"},[r("div",{staticClass:"select-time"},[r("div",{staticClass:"datatime",attrs:{id:"startTime"},on:{click:function(t){return e.selectTime("startTime")}}},[r("p",[e._v(e._s(e._f("dateFormate")(e.formData.startTime,"YYYY-MM-dd")))]),r("p",[r("span",[e._v("\n            "+e._s(e._f("dateFormate")(e.formData.startTime,"hh:00"))+"\n            "),r("img",{attrs:{src:a("3183")}})])])]),r("div",{staticClass:"countime"},[e._v(e._s(e.countTime))]),r("div",{staticClass:"datatime",attrs:{id:"endTime"},on:{click:function(t){return e.selectTime("endTime")}}},[r("p",[e._v(e._s(e._f("dateFormate")(e.formData.endTime,"YYYY-MM-dd")))]),r("p",[r("span",[e._v("\n            "+e._s(e._f("dateFormate")(e.formData.endTime,"hh:00"))+"\n            "),r("img",{attrs:{src:a("3183")}})])])])]),"2"!==e.formData.actType?r("div",{staticClass:"car-message",on:{click:function(t){return e.selectType("carInfo","carList")}}},[r("img",{attrs:{src:e.carInfo.attach,alt:""}}),r("p",[e._v("\n        "+e._s(e.carInfo.carsName||"--")+" ￥"+e._s(e.carInfo.unitPrice||"--")+"/"+e._s(e.carInfo.unit||"--")+"\n        "),e._m(0)])]):r("div",{staticClass:"car-message"},[r("img",{attrs:{src:e.carInfo.attach,alt:""}}),r("p",[e._v("\n        "+e._s(e.carInfo.carsName||"--")+"\n        "),r("span",{staticClass:"right"},[e._v("￥"+e._s(e.carInfo.unitPrice||"--")+"/"+e._s(e.carInfo.unit||"--"))])])])]),r("div",{staticClass:"next-button",on:{click:e.createOrder}},[r("div",[e._v("下一步")])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"right select"},[e._v("\n          选择车型\n          "),r("img",{attrs:{src:a("471a"),alt:""}})])}],o=a("a745"),n=a.n(o);function s(e){if(n()(e))return e}var c=a("5d73"),d=a.n(c);function m(e,t){var a=[],r=!0,i=!1,o=void 0;try{for(var n,s=d()(e);!(r=(n=s.next()).done);r=!0)if(a.push(n.value),t&&a.length===t)break}catch(c){i=!0,o=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return a}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){return s(e)||m(e,t)||l()}a("a481");var h=a("cebc"),u=(a("96cf"),a("3b8d")),p=a("bd86"),b=(a("7f7f"),a("e7e5"),a("d399")),g=a("3de1"),v={components:Object(p["a"])({},b["a"].name,b["a"]),data:function(){return{oneHourTimestamp:36e5,activityList:[],shopList:[],shopInfo:{bizCityName:"",bizDistrictName:"",bizProvinceName:"",bizRoadAddr:"",corpName:"",custMgrName:"",custMgrPhone:"",merchantNo:"",telephone:""},carInfo:{attach:"",brandName:"",carTotal:0,carsCode:"",carsName:"",id:1,modelName:"",remack:"",unit:"",unitPrice:0},carList:[],carAllList:[],placeList:[],personList:[{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"}],formData:{startTime:"",endTime:"",carCode:"",storeNo:"",memberNo:"",startPoint:"",endPoint:"",peopleNum:"",actType:"",actCode:"",actName:""},loading:!1}},computed:{countTime:function(){if("2"===this.$data.formData.actType)return"1小时";var e=null;if(this.$data.formData.endTime&&this.$data.formData.startTime){var t=new Date(Object(g["formatTimeCompatibleIos"])(this.$data.formData.endTime)).getTime(),a=new Date(Object(g["formatTimeCompatibleIos"])(this.$data.formData.startTime)).getTime();e=(t-a)/this.$data.oneHourTimestamp/24,e=e<=0?0:e}else e=0;return"".concat(e,"天")}},methods:{getStartTime:function(){var e=(new Date).getTime(),t=e+48*this.$data.oneHourTimestamp;return Object(g["timestampToTime"])(t)},initTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getStartTime();this.$data.formData.startTime=e;var t=new Date(Object(g["formatTimeCompatibleIos"])(e)).getTime();"0"===this.$data.formData.actType?this.$data.formData.endTime=Object(g["timestampToTime"])(t+48*this.$data.oneHourTimestamp):"1"===this.$data.formData.actType?this.$data.formData.endTime=Object(g["timestampToTime"])(t+96*this.$data.oneHourTimestamp):"2"===this.$data.formData.actType&&(this.$data.formData.endTime=Object(g["timestampToTime"])(t+this.$data.oneHourTimestamp))},selectTime:function(e){var t=(new Date).getFullYear(),a="startTime"===e?this.$data.formData.startTime:this.$data.formData.endTime,r="startTime"===e?Object(g["timestampToTime"])(new Date):this.$data.formData.startTime,i="hour";console.log("beginDateTime",r);var o=new mui.DtPicker({type:i,beginYear:t,endYear:t+1,beginDateTime:r,labels:["年","月","日","时"],value:Object(g["timestampToTime"])(a,"d")}),n=this;o.show(function(t){console.log(t),"startTime"===e?n.initTime(Object(g["formatTimeCompatibleIos"])("".concat(t.value,":00:00"))):(console.log(n.$data.formData.endTime),console.log("".concat(t.value,":00:00")),n.$data.formData.endTime=Object(g["formatTimeCompatibleIos"])("".concat(t.value,":00:00"))),o.dispose()})},validateTime:function(){new Date(Object(g["formatTimeCompatibleIos"])(this.getStartTime().substring(0,16))).getTime();var e=new Date(Object(g["formatTimeCompatibleIos"])(this.$data.formData.startTime.substring(0,16))).getTime(),t=new Date(Object(g["formatTimeCompatibleIos"])(this.$data.formData.endTime.substring(0,16))).getTime();return t<=e?(this.$Tools.layerOpen("结束时间不能小于或等于开始时间"),!1):!("1"===this.$data.formData.actType&&t-e<96*this.$data.oneHourTimestamp)||(this.$Tools.layerOpen("租车时间至少4天起"),!1)},selectActivity:function(e,t,a){this.$data.carList=this.$data.carList.map(function(e,t){return e.value=t,e.text="".concat(e.carsName,"(￥").concat(e.unitPrice,"/").concat(e.unit,")"),e}),this.$data.formData.actType=e,this.$data.formData.actCode=t,this.$data.formData.actName=a,this.initTime()},selectType:function(e,t){var a=this,r=new mui.PopPicker;r.setData(a.$data[t]),r.show(function(i){a[e]=a.$data[t][i[0].value],r.dispose()})},popupComfirm:function(e,t){console.log(t),this.$data[this.popupObj]=e},createOrder:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$store.state.user.memberNo,t){e.next=4;break}return this.$router.push("/login"),e.abrupt("return",!1);case 4:if("2"!==this.$data.formData.actType){e.next=11;break}if(""!==this.$data.formData.startPoint&&""!==this.$data.formData.endPoint){e.next=8;break}return this.$toast("出发地或目的地不能为空"),e.abrupt("return",!1);case 8:if(""!==this.$data.formData.peopleNum){e.next=11;break}return this.$toast("请选择出行人数"),e.abrupt("return",!1);case 11:if(this.validateTime()){e.next=13;break}return e.abrupt("return",!1);case 13:return this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"加载中"}),this.$data.formData.memberNo=t,this.$data.formData.storeNo=this.shopInfo.merchantNo,this.$data.formData.carCode=this.carInfo.carsCode,e.next=19,this.$postData("/store/createOrder",Object(h["a"])({},this.formData,{startTime:this.formData.startTime.replace(/\//g,"-"),endTime:this.formData.endTime.replace(/\//g,"-")}));case 19:if(a=e.sent,this.$toast.clear(),"string"!==typeof a&&a){e.next=27;break}if("/logout"!==a){e.next=25;break}return this.$store.dispatch("outLogin"),e.abrupt("return",!1);case 25:return this.$toast(a||"请求错误"),e.abrupt("return",!1);case 27:this.$router.push({name:"createOrder",query:{orderNo:a.orderNo}});case 28:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,a,r,i,o,n,s,c,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.type||"0",a="",r="",this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"加载中"}),e.next=6,this.$postData("store/storeList");case 6:if(i=e.sent,console.log(i),this.$data.shopList=i.map(function(e,t){return e.value=t,e.text=e.corpName,e}),o=f(this.$data.shopList,1),n=o[0],this.$data.shopInfo=n,this.$toast.clear(),"string"!==typeof i&&i){e.next=15;break}return this.$toast(i||"请求错误"),e.abrupt("return");case 15:return this.shopList=i.map(function(e,t){return console.log(e),e.value=t,e.text=e.corpName,e}),this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"加载中"}),e.next=19,this.$postData("/store/car/carSeriesList",{storeNo:this.shopList[0].merchantNo});case 19:if(s=e.sent,this.$toast.clear(),"string"!==typeof s&&s){e.next=24;break}return this.$toast(s||"请求错误"),e.abrupt("return");case 24:this.$data.carAllList=s,this.$data.carList=s,c=f(this.$data.carList,1),d=c[0],this.$data.carInfo=d,this.selectActivity(t,a,r);case 29:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.initData()},mounted:function(){document.body.style.backgroundColor="#eeeeee"},beforeDestroy:function(){document.body.style.backgroundColor="#fff"}},A=v,T=(a("e734"),a("2877")),w=Object(T["a"])(A,r,i,!1,null,"8d2b10ee",null);t["default"]=w.exports},"0173":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAnCAMAAABHaIrNAAABQVBMVEUAAAD/5B8mdP0ldP4ldPwEYf8ldP4ldP4kdP///gCjunT/6R7//wAldP7/5B7/5R394yEAUv8zePF2n6S2v2v/5hv+4yH/5R4ldP7/5B0PZ///6RYpde4Xa/+FrI//+QA4e+ZXjMtvnaqVtX6vu3Dx5xx0navGyVR/oqb/5R//5h//5B8ccP7/5x7//gAbbv8kdP//6RYlc/7/6Rr/5xx4pYxyo5JAgtjOy1Tr4iX87g7u2zP54CZekL+KqJf/5B+6xF7Rz00mdP0lc/4AXv//5R0ldPz/5x4icf//5h7/5B8ldP7///8LZP4fcP8QZv0pdv5Bhv0bbf3/5hvD2f7/4iL/6RcAW/4AXv//+gDd6f///wCdwP4Xa/8Sav8AV/7/8gXs8/+91f6hw/7O4P6Zvv6Ot/5/rf5uov5Wk/4xe/3V2gwbAAAASnRSTlMAsruwiv1MYEf99Ab6tY5K/Pv49/X18JdZU/v7+vn5+ff39/f19fLx7uvMuI16d3FDQTkuJ/n49/X19fPy7+ze2MfApKGhlG4rFW3VcS4AAAG+SURBVDjL3ZJpU+owFIYD3HIpCIICyvW67/u+77smNo2tRWpFcF/+/w8wSWtpOxXz2efLmfPOkzNnMgcwUh2TkZ+YzACH1AQUIeLorVCMc1ufFtRLth4R1I/t1bOC+niK6SUoyiLTM8J6SXh1ToatXhTWd/mvi7PEVhenla0uzjQA41CcCTAPQ9HDY9DBi6GXDcgo67Zdhnb7VXWfrm8VyzwuFnif3eTP9UKBx3pXl6Mv8eHW0Jil01geyVsGNOrZbVin1co78c6aaXAdnBrQlNf/X4+2mGbLUK5vWDat3pFce69lysNOnM+tbsh1g30kmJ/ZW2lTqt3tyeTAv6rS1pMc7Jew1D+Y7PHEfcv7M4uAc1S7IwRXJKmCCbmrSBUFEaTQ6o1rs8AhRhADI+TUMMiUq9MGS4qLqkgh/h+PrqkvVw0e3hQmxOJzCcpcPB3UpecLH+90fhq4HPp1Dd/79dsaQp0NfSGgoxu//njt0xPB6QH9lup/G3r8F+noPvAztWY6Vp78+mvT6Uj98G3zoGlNdaLiSw9qlXyvswsimuoBUzuouwd8gEKZbeidtD1xLyIdDSPhObFoNHZG6ycHcnX7rdACfQAAAABJRU5ErkJggg=="},"0a91":function(e,t,a){a("b42c"),a("93c4"),e.exports=a("b77f")},1938:function(e,t,a){var r=a("d13f");r(r.S,"Array",{isArray:a("b5aa")})},"24bb":function(e,t,a){var r=a("e7ad");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("499e").default;i("86956122",r,!0,{sourceMap:!1,shadowMode:!1})},"2d14":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAARBAMAAADwJOuSAAAAMFBMVEUAAAA5hP85hP85hP85hP85hP85hP85hP85hP85hP85hP85hP85hP85hP85hP85hP/k5oiLAAAAD3RSTlMA8S0WB5Ph27+3nXtzWVHUpk23AAAAP0lEQVQI12OYxAAF/4NhjI9HoIz/3x9AGf9/KEAZ/38ZQBn/pR2gjP+5MMb/AJgIXA1MF8wchMkIuxC2w90DACKCQhRop+sGAAAAAElFTkSuQmCC"},3183:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKBAMAAABLZROSAAAAJFBMVEUAAAA5hP85hP85hP85hP85hP85hP85hP85hP85hP85hP85hP9+9t9NAAAAC3RSTlMADcqm1BW+stscndgjpv0AAABJSURBVAjXY2gTYAADEwbtRDCDfRuD0HYwqzqRgdW7AMhg3gZUFAIStFYEEqzeBgzMm8D6QjaDhcCCizdBjZqxGygEBpxOAUASAJK/DRWWyI3EAAAAAElFTkSuQmCC"},"471a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAAAo0lEQVQokaXRvwpBYRQA8J9LeRPvoJgMNoPdprwDRh7AQimb3WAzGu6klMFjGChKisFVut0brlNnOH++X6e+XHlw36GEq2yRx6WACcYoZoRgFERQ/w9kFvZ0g6gYYpoBWYY9bQjemh0sfkA2aLyKIDZsYv8FckDtvRGHoIrzB6iK4yfogApuKUhdwtVJEGzFTo+ihVXSgzQI1p4fcIpygHna8gNtfB3zrPFMRgAAAABJRU5ErkJggg=="},"5d73":function(e,t,a){e.exports=a("0a91")},a745:function(e,t,a){e.exports=a("d604")},b041:function(e,t){e.exports=function(e){return"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},b77f:function(e,t,a){var r=a("0f89"),i=a("f159");e.exports=a("a7d3").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},d604:function(e,t,a){a("1938"),e.exports=a("a7d3").Array.isArray},e734:function(e,t,a){"use strict";var r=a("24bb"),i=a.n(r);i.a},e7ad:function(e,t,a){var r=a("b041");t=e.exports=a("2350")(!1),t.push([e.i,".create-order[data-v-8d2b10ee]{margin:.4rem .4rem 2.4rem;padding-bottom:.8rem;background-color:#fff}.create-order .van-picker__columns[data-v-8d2b10ee]{display:block}.create-order-inview[data-v-8d2b10ee]{padding:.8rem;border-radius:.1rem;background:#fff}.create-order-inview.first[data-v-8d2b10ee]{min-height:3rem;padding-bottom:.6rem;border-bottom:.02667rem solid #eee}.create-order-inview.second[data-v-8d2b10ee]{padding-top:.6rem}.create-order-inview h1[data-v-8d2b10ee],.create-order-inview h2[data-v-8d2b10ee]{font-weight:400}.create-order-inview h1[data-v-8d2b10ee],.create-order-inview h1 img[data-v-8d2b10ee]{vertical-align:middle}.create-order-inview h1[data-v-8d2b10ee]{margin-bottom:.4rem;padding-left:.6rem;line-height:.5rem;font-size:.48rem;color:#3984ff;background:url("+r(a("0173"))+') 0 0 no-repeat;background-size:.5rem}.create-order-inview h1 img[data-v-8d2b10ee]{width:.24rem;margin-left:.1rem}.create-order-inview h2[data-v-8d2b10ee]{margin-top:.2rem;font-size:.4rem;color:grey}.create-order-inview h2 a[data-v-8d2b10ee]{text-decoration:underline}.selectcar-type[data-v-8d2b10ee],.selectcar-type li[data-v-8d2b10ee]{border-top-left-radius:.4rem;border-top-right-radius:.4rem}.selectcar-type[data-v-8d2b10ee]{display:-webkit-box;display:-ms-flexbox;display:flex;background:#f4f4f4}.selectcar-type li[data-v-8d2b10ee]{width:100%;padding:.4rem 0;text-align:center;background:#f4f4f4}.selectcar-type li.active[data-v-8d2b10ee]{background:#fff}.select-place[data-v-8d2b10ee]{white-space:nowrap;padding-top:0;padding-bottom:0}.select-place li[data-v-8d2b10ee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-top:.4rem;line-height:1rem}.select-place li img[data-v-8d2b10ee]{width:.5rem;margin-right:.1rem}.select-place li span[data-v-8d2b10ee]{display:inline-block;width:6em}.select-place li input[data-v-8d2b10ee]{width:100%;height:1rem;font-size:.4rem;text-indent:.4rem;border:.02667rem solid #eee;border-radius:1rem}.select-time[data-v-8d2b10ee]{position:relative;height:1.6rem}.select-time .datatime[data-v-8d2b10ee]{position:absolute;top:0;color:grey}.select-time #startTime[data-v-8d2b10ee]{left:0}.select-time #endTime[data-v-8d2b10ee]{right:0}.select-time .datatime span[data-v-8d2b10ee],.select-time .datatime span img[data-v-8d2b10ee]{vertical-align:middle}.select-time .datatime span[data-v-8d2b10ee]{display:inline-block;width:100%;margin-top:.2rem;text-align:center;font-size:.6rem;color:#3984ff}.select-time .datatime span img[data-v-8d2b10ee]{width:.3rem}.select-time .countime[data-v-8d2b10ee]{position:relative;margin:0 2.8rem;padding:.4rem 0 .1rem;text-align:center;color:grey;border-bottom:.05333rem solid #3984ff}.select-time .countime[data-v-8d2b10ee]:after{content:"";position:absolute;right:-.10667rem;bottom:-.16rem;width:.26667rem;height:.29333rem;background:url('+r(a("2d14"))+") no-repeat;background-size:cover}.car-message[data-v-8d2b10ee]{margin-top:.3rem}.car-message img[data-v-8d2b10ee]{width:100%;border-radius:.1rem}.car-message p[data-v-8d2b10ee]{margin-top:.2rem}.car-message .right[data-v-8d2b10ee]{float:right}.car-message .right.select[data-v-8d2b10ee],.car-message .right.select img[data-v-8d2b10ee]{vertical-align:middle}.car-message .right.select[data-v-8d2b10ee]{white-space:nowrap;padding:.02667rem .2rem;color:#3984ff;border:.02667rem solid #3984ff;border-radius:.4rem}.car-message .right.select img[data-v-8d2b10ee]{width:.24rem;margin-left:.02667rem}.remarks[data-v-8d2b10ee]{margin-top:.4rem;text-align:center;color:grey}.next-button[data-v-8d2b10ee]{background:#fff}.next-button div[data-v-8d2b10ee]{height:1.2rem;margin:.4rem;line-height:1.2rem;text-align:center;color:#fff;background:#2193fc;border-radius:1.2rem}",""])}}]);
//# sourceMappingURL=main.3a7e9bbf.js.map